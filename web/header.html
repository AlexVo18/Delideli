<!DOCTYPE html>
<html lang="en">

<head>
    <title>Delideli</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--      Bootstrap         -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!--      CSS         -->
    <link rel="stylesheet" href="./styles/userStyle.css">
    <link rel="stylesheet" href="./styles/notificationStyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Sans+Extra+Condensed:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

</head>

<body>
    <!--         The navigation bar       -->
    <div class="navigator-bar">
        <div class="container ">
            <div class="row navigation-bar-first">
                <a href="homePage.html" class="logo col-md-3">
                    <img src="./assets/Logo2.png" alt="">
                </a>
                <div class="search-bar col-md-6">
                    <form action="" method="post" class="search-bar-content">
                        <input type="text" placeholder="What are you searching for ?">
                        <select name="" id="">
                            <option value="">TITLE</option>
                            <option value="">CATEGORY</option>
                            <option value="">INGREDIENT</option>
                            <option value="">CUISINES</option>
                        </select>
                        <button type="submit"><img src="./assets/search-button.svg" alt="Search Icon"></button>
                    </form>
                </div>

                <div class="notification col-md-1">
                    <div class="dropdown-notification">
                        <button class="dropbtn-notification" onclick="toggleDropdown()"><img
                                src="assets/notification.svg"></button>
                        <div class="dropdown-content-notification container" id="dropdownContent">
                            <div>
                                <div class="status-bar-notification">
                                    <p>Total: 43</p>
                                    <p>Unread: 17</p>
                                </div>
                            </div>
                            <div class="notification-content">

                                <button type="button" class="a-notification" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal">
                                    <div class="notification-first-row"><img
                                            src="assets/delideli-website-favicon-color.png" alt="img">
                                        <p>Delideli</p>
                                    </div>
                                    <div class="text">
                                        <p>Your recipe is not suitable for publicizing thag tri cho dien hahahahah
                                        </p>
                                    </div>
                                    <p class="date">
                                        2 hour ago
                                    </p>
                                </button> <!-- Add closing tag for <a> element -->






                            </div>

                        </div>
                    </div>
                </div>




                <script>
                    var dropdownContent = document.getElementById("dropdownContent");
                    var dropbtnNotification = document.querySelector(".dropbtn-notification");
                    var notificationButton = document.querySelector(".a-notification");

                    // Toggle dropdown content
                    function toggleDropdown() {
                        dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
                    }

                    // Open modal and prevent closing the dropdown
                    notificationButton.addEventListener("click", function (event) {
                        event.stopPropagation(); // Prevent the click event from bubbling up to the dropdown container
                    });

                    // Close dropdown content when clicking outside, unless a modal is open
                    document.addEventListener("mousedown", function (event) {
                        var targetElement = event.target;
                        var modals = document.querySelectorAll(".modal");
                        var isModalOpen = false;
                        var isDropdownTarget = targetElement === dropbtnNotification || dropbtnNotification.contains(targetElement);
                        var isNotificationTarget = targetElement.classList.contains("a-notification") ||
                            targetElement.closest(".a-notification") !== null;

                        if (!isDropdownTarget && !isNotificationTarget) {
                            modals.forEach(function (modal) {
                                if (modal.classList.contains("show")) {
                                    isModalOpen = true;
                                }
                            });
                            if (!isModalOpen) {
                                dropdownContent.style.display = "none";
                            }
                        }
                    });

                </script>


                <div class="account col-md-2">
                    <span><a href="logIn.html">Sign in</a></span>
                    <span>|</span>
                    <span><a href="register.html">Register</a></span>
                </div>

            </div>
            <div class="row navigation-bar-last">
                <ul class="navigation-bar-content">
                    <li>
                        <div class="dropdown">
                            <button class="dropbtn">CATEGORIES</button>
                            <div class="dropdown-content">
                                <a href="">1</a>
                                <a href="">2</a>
                                <a href="">3</a>
                                <a href="searchResultPage.html">View More</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="dropdown">
                            <button class="dropbtn">CUISINES</button>
                            <div class="dropdown-content">
                                <a href="">1</a>
                                <a href="">2</a>
                                <a href="">3</a>
                                <a href="searchResultPage.html">View More</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="dropdown">
                            <button class="dropbtn">DIFFICULTIES</button>
                            <div class="dropdown-content">
                                <a href="">1</a>
                                <a href="">2</a>
                                <a href="">3</a>
                                <a href="searchResultPage.html">View More</a>
                            </div>
                        </div>
                    </li>
                    <li><a href="newsPage.html">NEWS</a></li>
                    <li><a href="">ABOUT US</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="deletePlanModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title fs-5" id="exampleModalLabel">
                        <p class="modal-title-text">Thang tri cho dien haha haha aha a ha aha ah
                            aha
                            ah a aha a aha ha</p>
                        <p class="modal-title-date">2 hour ago</p>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal-body-content">content content content content content content content content
                        content
                        content
                        content content content content
                        content content content content
                    </div>

                    <a href="link.html" class="modal-link">Click here</a>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- For admin reject form-->

    <button type="button" class="btn-disapprove" data-bs-toggle="modal" data-bs-target="#disapprove">
        Disapprove
    </button>

    <div class="modal fade" id="disapprove" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="deletePlanModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <form action="MainController" class="modal-content modal-content-self">
                <div class="modal-header form-header">
                    <div class="form-title disapprove-style" id="exampleModalLabel">
                        Disapprove Recipe
                    </div>
                </div>
                <div class="modal-body">

                    <p class="title-text">Message Title:<br><input type="text" class="title" maxlength="100">
                    </p>
                    <p>Message body: </p>
                    <textarea rows="4" class="form-body-content" name="description">
                    </textarea>
                    <!-- Here to store hidden input base on the type of the notification-->
                    <!-- Should always have userId, except system notification-->
                    <input type="text" name="userId" value="" hidden>
                    <!-- For example, when accept or reject a recipe, pass recipeId here-->
                    <input type="text" name="recipeId" value="" hidden>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger" data-bs-dismiss="modal" name="action"
                        value="disapprove">Disapprove</button>
                </div>
            </form>
        </div>
    </div>


    <!--      Bootstrap for JS         -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
</body>